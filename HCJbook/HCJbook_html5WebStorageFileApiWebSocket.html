<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    body {
      background-color: #98c588;
    }

    dt {
      font-weight: bold;
    }
  </style>
</head>

<body>
  <div>
    <dl>
      <dt>HTML5 웹 스토리지</dt>
      <dd>HTML5는 클라이언트 컴퓨터에 데이터를 저장하는 메커니즘으로 웹 스토리지를 제공</dd>
      <dd>쿠키보다 안전하며 속도도빠름,쿠키는 서버로 요청할때마다 매번 http요청 헤더에 붙여서 전송해야하기때문에 네트워크에 부담이된다.</dd>
      <dd>웹사이트의 성능에 영향을 주지않으며 많은 양의 데이터를 저장할수있다.</dd>
      <dd>웹스토리지안에서 데이터는 키/값의 쌍으로 저장되며 데이터는 웹 페이지만 엑세스할 수 있다.</dd>
      <dt>localStorage , sessionStorage</dt>
      <dd>웹 스토리지에는 데이터를 저장하기 위한 두종류의 객체가 있다.</dd>
      <dt>localStorage</dt>
      <dd>-만료 날짜가 없는 데이터를 저장, 데이터는 브라우저가 닫힐 때 삭제되지 않으며 1년동안이라도 사용가능하며 도메인이 다르면 서로의 로컬 스토리지에 접근 불가</dd>
      <dd>-- 구글의 웹 페이지에서 네이버 웹페이지의 로컬 스토리지에 접근할 수 없다. but 같은 도메인은 로컬 스토리지를 공유한다.</dd>
      <dd>--- localStorage 사용방법 ex_
        <code>localStorage.pageLoadCount = 0</code>
      </dd>
      <dd>---- localStorage-전역 변수로서 로컬 스토리지를 나타냄</dd>
      <dd>---- pageLoadCount - 자신이 원하는 변수 이름을 적어주면되며, 값을 꺼내 사용할때도 마찬가지 형태를 사용하면 됨</dd>
      <dt>sessionStorage</dt>
      <dd>각 세선(하나의 윈도우)마다 데이터가 별도로 저장됨, 해당 세션이 종료되면 데이터가 사라짐</dd>
      <dd>- 같은 도메인에 연결했어도 브라우저 윈도우가 다르다면 서로 다른 영역을 사용함 , 새로 윈도우를 열어 동일한 도메인에 접속하더라도 세션 스토리지는 서로 다름</dd>
      <p>로컬 스토리지와 세션스토리지는 저장 공간만 차이가있을뿐 다른것은 동일함</p>
    </dl>
    <div>
      <hr>
      <p>사용자가 페이지를 방문한 횟수를 로컬 스토리지에 저장해보기</p>
      <p>페이지 방문 횟수 : <span id="visitCount"></span>번</p>
      <script>
        if (!localStorage.pageLoadCount) {
          localStorage.pageLoadCount = 0
          localStorage.pageLoadCount = parseInt(localStorage.pageLoadCount) + 1
          document.getElementById(`visitCount`).textContent = localStorage.pageLoadCount
          //console.log(localStorage.pageLoadCount);
        }
        //로컬 스토리지 지원 여부 검사
        if ((`localStorage` in window) && window[`localStorage`] !== null) {
          
        }else {
          confirm(`브라우저가 웹 스토리지를 지원하지 않음`)
        }
      </script>
    </div>
    <hr>
    <div>
      <script>
        function incrementCounter() {
          if ((`localStorage` in window) && window[`localStorage`] !== null) {//로컬스토리지가 윈도우안에있으며 윈도우에 로컬스토리지가 널이아닌경우 실행
            if (localStorage.count) {//카운터가 음수(false)가 아닌경우
              localStorage.count++ //카운터가있는경우(숫자가있는경우?) 1씩 ++
            } else {
              localStorage.count = 1 //카운터가 없는경우 횟수 1 대입
            }
            document.getElementById(`clickCount`).innerHTML = localStorage.count + ` 번 클릭하셨습니다.`
          } else {
            document.getElementById(`clickCount`).innerHTML = `웹 스토리지를 지원하지 않는 브라우저입니다.`
          }
        }
      </script>
      <h3>사용자가 버튼을 클릭한 횟수를 localStorage 에 저장하는 프로그램</h3>
      <button type="button" onclick="incrementCounter()">클릭 미!</button>
      <div id="clickCount"></div>
      <p>브라우저를 닫고 버튼을 눌러도 횟수는 보존되며 사용자가 명시적으로 삭제하기 전까지 보존됨</p>
      <p>웹 스토리지를 사용하기 전에 localStorage & sessionStorage 에대한 브라우저 지원을 확인해봐야함</p>
    </div>
    <hr>
    <div>
      <script>
        function incrementCounter02() {
          if ((`sessionStorage` in window) && window[`sessionStorage`] !== null) {//로컬스토리지가 윈도우안에있으며 윈도우에 로컬스토리지가 널이아닌경우 실행
            if (sessionStorage.count) {//카운터가 음수(false)가 아닌경우
              sessionStorage.count++ //카운터가있는경우(숫자가있는경우?) 1씩 ++
            } else {
              sessionStorage.count = 1 //카운터가 없는경우 횟수 1 대입
            }
            document.getElementById(`clickCount02`).innerHTML = sessionStorage.count + ` 번 클릭하셨습니다.`
          } else {
            document.getElementById(`clickCount02`).innerHTML = `웹 스토리지를 지원하지 않는 브라우저입니다.`
          }
        }
      </script>
      <h3>sessionStorage</h3>
      <p>위에 localStorage 를 sessionStorage 변경하여 실행해보자</p>
      <button type="button" onclick="incrementCounter02()">클릭 미!</button>
      <div id="clickCount02"></div>
      <p>sessionStorage 객체는 단지 하나의 세션에서만 데이터를 저장한다는 점을 제외하고는 localStorage 와 동일하다, 
        <br>
        but 브라우저 창을 닫은 후에 재실행하면 삭제된다.
      </p>
    </div>
  </div>
</body>

</html>